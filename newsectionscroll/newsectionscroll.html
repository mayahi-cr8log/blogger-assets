<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å®Œå…¨ç‰ˆãƒ»ç„¡é™æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«</title>
  <style>
    html,
    body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      /* ğŸ”§ ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é˜²æ­¢ */
      font-family: Arial, sans-serif;
    }

    .tabs {
      display: flex;
      justify-content: center;
      margin-bottom: 20px;
      gap: 10px;
    }

    .tabs button {
      padding: 10px 20px;
      border: none;
      background: #333;
      color: white;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
      font-size: 16px;
    }

    .tabs button:hover {
      background: #555;
    }

    .contents_width {
      position: relative;
    }

    .scroll-container {
      overflow-x: auto;
      scroll-behavior: smooth;
      white-space: nowrap;
      width: 100%;
      margin: auto;
      border-radius: 10px;
      position: relative;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }

    .scroll-container::-webkit-scrollbar {
      display: none;
    }

    .scroll-content {
      display: flex;
      align-items: center;
      padding: 20px 0;
      flex-wrap: nowrap;
    }

    .light {
      background: linear-gradient(135deg, #e0f7fa, #f1f8e9);
    }

    .dark {
      background: linear-gradient(135deg, #26c6da, #00acc1);
    }

    .card,
    .dummy-card {
      flex: 0 0 auto;
      width: 97%;
      height: auto;
      aspect-ratio: 16/9;
      margin: 0 20px;
      background: linear-gradient(135deg, #74ebd5, #acb6e5);
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      font-weight: bold;
      color: #333;
      text-align: center;
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .card:hover,
    .dummy-card:hover {
      transform: scale(1.05);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
    }

    .arrow-left,
    .arrow-right {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      font-size: 30px;
      color: #333;
      cursor: pointer;
      opacity: 0.7;
      transition: transform 0.3s ease;
    }

    .arrow-left:hover,
    .arrow-right:hover {
      transform: translateY(-50%) scale(1.2);
      opacity: 1;
    }

    .arrow-left {
      left: 19%;
      animation: move-left 1.5s infinite alternate ease-in-out;
    }

    .arrow-right {
      right: 19%;
      animation: move-right 1.5s infinite alternate ease-in-out;
    }

    @keyframes move-left {
      0% {
        transform: translateX(-10px);
      }

      100% {
        transform: translateX(10px);
      }
    }

    @keyframes move-right {
      0% {
        transform: translateX(10px);
      }

      100% {
        transform: translateX(-10px);
      }
    }
  </style>
</head>

<body>
  <div class="contents_width">
    <div class="tabs">
      <button data-target="tab1">Works</button>
      <button data-target="tab2">Camera</button>
      <button data-target="tab3">Web</button>
    </div>

    <div class="scroll-container">
      <div class="scroll-content">
        <div class="dummy-card light">ãƒã‚¤ã‚¯ãƒªã‚¨ã‚¤ãƒˆãƒ–ãƒ­ã‚°</div>
        <div class="dummy-card dark">ã‚«ãƒ¡ãƒ©ãƒ–ãƒ­ã‚°</div>
        <div class="dummy-card light">ã‚¦ã‚§ãƒ–åˆ¶ä½œã‚¹ã‚­ãƒ«ãƒ–ãƒ­ã‚°</div>
        <div class="card dark" data-id="tab1">ãƒã‚¤ã‚¯ãƒªã‚¨ã‚¤ãƒˆãƒ–ãƒ­ã‚°</div>
        <div class="card light" data-id="tab2">ã‚«ãƒ¡ãƒ©ãƒ–ãƒ­ã‚°</div>
        <div class="card dark" data-id="tab3">ã‚¦ã‚§ãƒ–åˆ¶ä½œã‚¹ã‚­ãƒ«ãƒ–ãƒ­ã‚°</div>
      </div>
    </div>

    <div class="arrow-left">ğŸ”™</div>
    <div class="arrow-right">ğŸ”œ</div>
  </div>

  <script>
    document.querySelectorAll('.contents_width').forEach(section => {
      const container = section.querySelector('.scroll-container');
      const content = section.querySelector('.scroll-content');
      const leftArrow = section.querySelector('.arrow-left');
      const rightArrow = section.querySelector('.arrow-right');
      const buttons = section.querySelectorAll('.tabs button');

      const originals = [...content.children];
      for (let i = 0; i < 1; i++) {
        originals.forEach(card => {
          content.appendChild(card.cloneNode(true));
        });
      }

      function centerInitialCard() {
        const firstTarget = content.querySelector('[data-id="tab1"]');
        if (!firstTarget) return;
        const offset = firstTarget.offsetLeft + firstTarget.offsetWidth / 2 - container.clientWidth / 2;
        container.scrollLeft = offset;
      }
      centerInitialCard();

      buttons.forEach(button => {
        button.addEventListener('click', () => {
          const targetId = button.dataset.target;
          const targetElement = content.querySelector(`[data-id="${targetId}"]`);
          if (targetElement) {
            const offset = targetElement.offsetLeft + targetElement.offsetWidth / 2 - container.clientWidth / 2;
            container.scrollTo({ left: offset, behavior: 'smooth' });
          }
        });
      });

      function centerCard(card) {
        const targetCenter = card.offsetLeft + card.offsetWidth / 2;
        const containerCenter = container.scrollLeft + container.clientWidth / 2;
        const offset = targetCenter - containerCenter;
        container.scrollBy({ left: offset, behavior: 'smooth' });
      }

      function findCenterCard() {
        const cards = content.querySelectorAll('.card, .dummy-card');
        const containerCenter = container.scrollLeft + container.clientWidth / 2;
        let closestCard = null;
        let minDistance = Infinity;

        cards.forEach(card => {
          const cardCenter = card.offsetLeft + card.offsetWidth / 2;
          const distance = Math.abs(containerCenter - cardCenter);
          if (distance < minDistance) {
            minDistance = distance;
            closestCard = card;
          }
        });

        return closestCard;
      }

      leftArrow.addEventListener('click', () => {
        const currentCard = findCenterCard();
        let prevCard = currentCard.previousElementSibling || content.lastElementChild;
        centerCard(prevCard);
      });

      rightArrow.addEventListener('click', () => {
        const currentCard = findCenterCard();
        let nextCard = currentCard.nextElementSibling || content.firstElementChild;
        centerCard(nextCard);
      });

      let ticking = false;
      container.addEventListener('scroll', () => {
        if (!ticking) {
          window.requestAnimationFrame(() => {
            const scrollWidth = content.scrollWidth;
            const containerWidth = container.clientWidth;
            if (container.scrollLeft <= 0) {
              container.scrollLeft = scrollWidth / 2;
            } else if (container.scrollLeft + containerWidth >= scrollWidth) {
              container.scrollLeft = scrollWidth / 2 - containerWidth;
            }
            ticking = false;
          });
          ticking = true;
        }
      });

      setTimeout(() => {
        const scrollBy = 1365;
        const duration = 2000;
        const start = container.scrollLeft;
        const startTime = performance.now();

        function scrollStep(currentTime) {
          const elapsed = currentTime - startTime;
          const progress = Math.min(elapsed / duration, 1);
          container.scrollLeft = start + scrollBy * progress;
          if (progress < 1) {
            requestAnimationFrame(scrollStep);
          }
        }

        requestAnimationFrame(scrollStep);
      }, 100);
    });

    document.addEventListener("DOMContentLoaded", function () {
      const labelMap = {
        tab1: "Works",
        tab2: "Camera",
        tab3: "Web",
      };

      const cards = document.querySelectorAll(".card");

      cards.forEach((card) => {
        const tabId = card.dataset.id;
        const label = labelMap[tabId];
        const url = `https://mgusa-blog.blogspot.com/feeds/posts/default/-/${label}?alt=json`;

        fetch(url)
          .then((res) => res.json())
          .then((data) => {
            const entries = data.feed.entry;
            if (!entries || entries.length === 0) return;

            const entry = entries[0]; // æœ€æ–°è¨˜äº‹1ä»¶ã ã‘å–å¾—
            const link = entry.link.find((l) => l.rel === "alternate").href;
            const title = entry.title.$t;
            const content = entry.content.$t;

            // è¨˜äº‹å†…ã®æœ€åˆã®ç”»åƒURLã‚’å–å¾—
            const imgMatch = content.match(/<img[^>]+src="([^">]+)"/);
            const imageUrl = imgMatch ? imgMatch[1] : "";

            // ã‚«ãƒ¼ãƒ‰ã®HTMLã‚’ä¸Šæ›¸ã
            card.innerHTML = `
          <a href="${link}" target="_blank" style="text-decoration:none;color:inherit;">
            <div style="background-image:url('${imageUrl}'); background-size:cover; background-position:center; height:150px; border-radius:12px; display:flex; align-items:end; padding:10px; color:white; font-weight:bold; text-shadow:0 0 5px #000;">
              ${title}
            </div>
          </a>
        `;
          })
          .catch((err) => {
            console.error("ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼:", err);
          });
      });
    });


  </script>
</body>

</html>